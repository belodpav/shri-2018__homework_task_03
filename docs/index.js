!function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},a.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=8)}([function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["factorial proc","mov   eax, [esp + 4]","test  eax, eax","jz    END","mul   dword ptr [esp + 4]","m3: fild dword ptr [esi]","invoke Beep, 3951, 200","0bbh,0cch,0ceh,0b9h,0c8h","mov ax, word ptr X","mov bx, word ptr X+2","sub ax, word ptr Y","sbb bx,word ptr Y+2","mov word ptr Z,ax","mov word ptr Z+2,bx"]},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(){i.innerHTML="";for(var t=0;t<5;t++){var a=Math.floor(Math.random()*r.default.length);i.innerHTML+=r.default[a]+"<br/>"}setTimeout(e,400)};var n,r=(n=a(0))&&n.__esModule?n:{default:n},i=document.querySelector(".app__i-text")},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=function(){function e(t,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=document.querySelector(t);this._rootNode=n,this._volume=n.querySelector(".app__i-volume"),this._diagram=n.querySelector(".app__i-diagram"),this._generateDiagItems(a.itemsCount),this._appendDiagItems()}return n(e,[{key:"_generateDiagItems",value:function(e){for(var t=[],a=0;a<e;a++)t.push(this._elClass("app__i-diagram-item"));this._diagramItems=t}},{key:"_appendDiagItems",value:function(){var e=this;this._diagramItems.forEach(function(t){e._diagram.appendChild(t)})}},{key:"_elClass",value:function(e){var t=document.createElement("div");return t.className=e,t}},{key:"updateVolumeVal",value:function(e){this._volume.style.height=e+"px"}},{key:"updateAFDiagram",value:function(e){for(var t=this._diagramItems,a=0;a<t.length;a++)t[a].style.height=e[a]+"px"}}]),e}();t.default=r},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._volumeVal=0,this._AFArray=[],this._AFCount=t,this.initAudioStream()}return n(e,[{key:"getVolumeVal",value:function(){return this._volumeVal}},{key:"getAFArray",value:function(){return this._AFArray}},{key:"getAverageVolume",value:function(e){for(var t=0,a=e.length,n=0;n<a;n++)t+=e[n];return t/a}},{key:"getAverageArray",value:function(e,t){for(var a=e.length,n=Math.floor(a/t),r=[],i=void 0,o=0;o<t;o++){i=0;for(var u=o*n;u<(o+1)*n;u++)i+=e[u];r.push(i/n)}return r}},{key:"_handleAudioSuccess",value:function(e){var t=this,a=new(window.AudioContext||window.webkitAudioContext),n=a.createAnalyser(),r=a.createGain(),i=a.createScriptProcessor(2048,1,1);n.smoothingTimeConstant=.8,n.fftSize=1024,i.onaudioprocess=function(){var e=new Uint8Array(n.frequencyBinCount);n.getByteFrequencyData(e);var a=t.getAverageVolume(e);t._volumeVal=a,t._AFArray=t.getAverageArray(e,t._AFCount)},r.gain.value=1,a.createMediaStreamSource(e).connect(r),r.connect(n),n.connect(i),i.connect(a.destination)}},{key:"_handleAudioError",value:function(e){console.error("Error!",e)}},{key:"initAudioStream",value:function(){navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0}).then(this._handleAudioSuccess.bind(this)).catch(this._handleAudioError.bind(this)):this._canvas.innerText="getUserMedia is not supported"}}]),e}();t.default=r},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.redFilter=function(e,t,a){e.globalCompositeOperation="multiply",e.fillStyle="rgb(255,0,0)",e.beginPath(),e.rect(0,0,t,a),e.closePath(),e.fill()}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.swapLines=function(e,t,a){for(var n=4*e.height,r=4*e.width,i=e.data,o=n*t*4,u=n*a*4,s=0,c=0;c<r;c++)s=i[o+c],i[o+c]=i[u+c],i[u+c]=s;return e},t.swapLinesRandom=function(e,t,a){for(var n=4*e.height,r=4*e.width,i=e.data,o=n*t*4,u=n*a*4,s=0,c=Math.floor(Math.random()*r);c<r;c++)s=i[o+c],i[o+c]=i[u+c],i[u+c]=s;return e}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(5),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=t,this._x=0,this._y=0}return n(e,[{key:"get",value:function(){return this._data}},{key:"red",value:function(e){for(var t=this._data.data,a=0;a<t.length;a+=4)t[a]=e;return this}},{key:"gamma",value:function(e){for(var t=this._data.data,a=1/e,n=0;n<t.length;n+=4){var r=t[n],i=t[n+1],o=t[n+2];t[n]=r/255*255^a,t[n+1]=o/255*255^a,t[n+2]=i/255*255^a}return this}},{key:"brightness",value:function(e){for(var t=this._data.data,a=this._truncate,n=0;n<t.length;n+=4){var r=t[n],i=t[n+1],o=t[n+2];t[n]=a(r+e),t[n+1]=a(i+e),t[n+2]=a(o+e)}return this}},{key:"grayAverage",value:function(){for(var e=this._data.data,t=0,a=0;a<e.length;a+=4){var n=e[a],r=e[a+1],i=e[a+2];t=Math.floor((n+r+i)/3),e[a]=t,e[a+1]=t,e[a+2]=t}return this}},{key:"setContrast",value:function(e){for(var t=259*(e+255)/(255*(259-e)),a=this._data.data,n=this._truncate,r=0;r<a.length;r+=4)a[r]=n(t*(a[r]-128)+128),a[r+1]=n(t*(a[r+1]-128)+128),a[r+2]=n(t*(a[r+2]-128)+128);return this}},{key:"noiseLight",value:function(e){for(var t=this._data,a=0;a<t.height-4;a+=Math.floor(Math.random()*(4+t.height-4)*e))t=(0,r.swapLinesRandom)(t,a,a+3),t=(0,r.swapLinesRandom)(t,a+1,a+2);return this}},{key:"noise",value:function(){for(var e=this._data,t=0;t<e.height-4;t+=5)e=(0,r.swapLinesRandom)(e,t,t+3),e=(0,r.swapLinesRandom)(e,t+1,t+2);return this}},{key:"shake",value:function(e){return this._x=Math.floor(2*Math.random()*e-e),this._y=Math.floor(2*Math.random()*e-e),this}},{key:"getX",value:function(){return this._x}},{key:"getY",value:function(){return this._y}},{key:"_truncate",value:function(e){return e>255?255:e<0?0:e}}]),e}();t.default=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=(n=a(6))&&n.__esModule?n:{default:n},o=a(4),u=function(){function e(t,a,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._audio=a,this._termInterface=n,this._initNodeConnection(t),this._initVideoStream()}return r(e,[{key:"_initNodeConnection",value:function(e){var t=document.querySelector(e);this._canvas=t.querySelector(".app__canvas"),this._video=t.querySelector(".app__video"),this._rootNode=t}},{key:"_setSize",value:function(e,t){this.width=e,this.height=t}},{key:"_setAppSize",value:function(e,t){this._rootNode.style.width=e+"px",this._rootNode.style.height=t+"px"}},{key:"_setCanvasSize",value:function(e,t){this._canvas.width=e,this._canvas.height=t}},{key:"_getSizeObj",value:function(){var e=this._video,t=document.documentElement.clientWidth,a=t>e.videoWidth?e.videoWidth:t;return{width:a,height:Math.floor(e.videoHeight/e.videoWidth*a)}}},{key:"_updateInterface",value:function(e,t){this._termInterface.updateVolumeVal(e),this._termInterface.updateAFDiagram(t)}},{key:"_canvasUpdate",value:function(){var e=this._canvas,t=this._video,a=this.width,n=this.height,r=this._audio,u=e.getContext("2d"),s={volume:r.getVolumeVal(),afArray:r.getAFArray()};u.clearRect(0,0,a,n),u.drawImage(t,0,0,a,n);var c=new i.default(u.getImageData(0,0,a,n));u.putImageData(c.get(),0,0),c=new i.default(u.getImageData(0,0,a,n)),s.volume>70?(c.noise().shake(s.volume/10),e.classList.remove("app__canvas_contrast_200"),e.classList.add("app__canvas_contrast_400")):(c.noiseLight(.4),e.classList.remove("app__canvas_contrast_400"),e.classList.add("app__canvas_contrast_200")),u.putImageData(c.get(),c.getX(),c.getY()),this._updateInterface(s.volume,s.afArray),(0,o.redFilter)(u,a,n),requestAnimationFrame(this._canvasUpdate.bind(this))}},{key:"_handleVideoError",value:function(e){console.error("Error!",e)}},{key:"_handleVideoSucces",value:function(e){var t=this;this._video.srcObject=e,this._video.addEventListener("loadedmetadata",function(){var e=t._getSizeObj(),a=e.width,n=e.height;t._setSize(a,n),t._setAppSize(a,n),t._setCanvasSize(a,n),requestAnimationFrame(t._canvasUpdate.bind(t))})}},{key:"_initVideoStream",value:function(){navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then(this._handleVideoSucces.bind(this)).catch(this._handleVideoError.bind(this)):this._canvas.innerText="getUserMedia is not supported"}}]),e}();t.default=u},function(e,t,a){"use strict";var n=u(a(7)),r=u(a(3)),i=u(a(2)),o=u(a(1));function u(e){return e&&e.__esModule?e:{default:e}}u(a(10));var s=new i.default(".app__i",{itemsCount:16}),c=new r.default(16);new n.default(".app",c,s),(0,o.default)()},,function(e,t){}]);
//# sourceMappingURL=index.js.map